# Music Visualizer 요구사항 정의서

## 1. 개요

본 문서는 Flutter를 사용하여 PC의 마이크 입력을 기반으로 실시간 음악 시각화(Music Visualizer) 애플리케이션을 개발하기 위한 요구사항을 정의합니다. 애플리케이션은 소리의 데시벨(크기)과 음계(높낮이)를 분석하여 다채롭고 화려한 그래픽으로 표현하는 것을 목표로 합니다.

## 2. 주요 기능

- **실시간 음성 입력:** PC에 연결된 마이크를 통해 실시간으로 오디오 데이터를 입력받습니다.
- **음성 데이터 분석:** 입력된 오디오 데이터의 데시벨과 주파수를 분석하여 음계 정보를 추출합니다.
- **데이터 시각화:** 분석된 오디오 데이터를 기반으로 다양한 형태의 그래픽 효과를 동적으로 생성하여 화면에 표시합니다.

## 3. 세부 요구사항

### 3.1. 기능 요구사항

#### 3.1.1. 음성 입력 모듈
- 기본 오디오 입력 장치(내장 사운드카드 마이크)로부터 오디오 스트림을 지속적으로 수신해야 합니다.
- 초당 최소 44100 샘플(44.1kHz)의 샘플링 레이트를 지원해야 합니다.
- 오디오 데이터는 실시간 분석을 위해 버퍼 형태로 관리되어야 합니다.

#### 3.1.2. 음성 분석 모듈
- **데시벨(Decibel) 분석:**
    - 오디오 스트림의 진폭(Amplitude)을 기반으로 실시간 데시벨 값을 계산해야 합니다.
    - 계산된 데시벨 값은 시각화 모듈에서 그래픽의 크기나 강도를 조절하는 데 사용됩니다.
- **음계(Pitch) 분석:**
    - FFT(고속 푸리에 변환)와 같은 알고리즘을 사용하여 오디오 데이터의 주파수 스펙트럼을 분석해야 합니다.
    - 주파수 분석을 통해 현재 오디오의 지배적인 주파수(Dominant Frequency)를 파악하고, 이를 기반으로 가장 가까운 음계(예: C, D, E, F, G, A, B)를 식별해야 합니다.
    - 식별된 음계 정보는 시각화 모듈에서 그래픽의 색상이나 형태를 결정하는 데 사용됩니다.

#### 3.1.3. 그래픽 시각화 모듈
- **화면 구성:**
    - 애플리케이션은 1920x480 해상도의 전체 화면으로 실행되어야 합니다.
- **시각화 효과:**
    - 분석된 데시벨 값에 따라 움직이는 막대 그래프, 파형, 파티클 등 다양한 시각적 요소를 표현해야 합니다.
    - 분석된 음계 정보에 따라 시각적 요소의 색상, 패턴 또는 모양이 동적으로 변경되어야 합니다. (예: 'C'음계는 빨간색, 'D'음계는 주황색 계열로 표현)
    - "화려한" 그래픽을 위해 네온 효과, 그라데이션, 부드러운 애니메이션 전환 등의 시각적 효과를 적용해야 합니다.
    - 여러 시각화 스타일(테마)을 구현하여 사용자가 선택할 수 있도록 하는 기능은 추후 확장 기능으로 고려할 수 있습니다.

### 3.2. 비기능 요구사항

- **성능:**
    - 오디오 분석 및 그래픽 렌더링은 실시간으로 부드럽게(최소 30 FPS 이상) 동작해야 합니다.
    - CPU 및 메모리 사용량을 최적화하여 시스템에 과도한 부하를 주지 않아야 합니다.
- **플랫폼:**
    - Flutter 프레임워크를 사용하여 개발하며, 주 대상 플랫폼은 Windows 데스크톱입니다.
- **화면 해상도:**
    - 1920x480의 고정된 해상도를 지원해야 합니다.

## 4. 기술 스택 (제안)

- **언어:** Dart
- **프레임워크:** Flutter
- **주요 라이브러리 (고려 대상):**
    - `mic_stream` 또는 `flutter_sound`: 실시간 마이크 입력을 위해 사용
    - `fftea`: FFT 분석을 통한 주파수 계산을 위해 사용
    - `flame` 또는 Flutter `CustomPainter`: 효율적인 실시간 렌더링 및 그래픽 효과 구현을 위해 사용

## 5. 제약사항

- 오디오 입력 소스는 PC의 기본 마이크로 한정됩니다. 별도의 오디오 파일 재생 기능은 포함하지 않습니다.
- 초기 버전에서는 단일 시각화 테마를 제공하는 것을 목표로 합니다. 